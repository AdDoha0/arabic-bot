use crate::ai::gpt_client::GptClient;
use async_trait::async_trait;

struct TestGptClient;

#[async_trait]
impl GptClient for TestGptClient {}

pub async fn run_test() {
    let context = r#"
    ะขั - ะฟัะตะฟะพะดะฐะฒะฐัะตะปั ะฐัะฐะฑัะบะพะณะพ. ะกะพะทะดะฐะฒะฐะน 3 ะฟัะฐะบัะธัะตัะบะธั ะทะฐะดะฐะฝะธั ะฟะพ ะผะฐัะตัะธะฐะปั ััะพะบะฐ.
    ะขัะตะฑะพะฒะฐะฝะธั:
    - ะ ะบะฐะถะดะพะผ ะทะฐะดะฐะฝะธะธ ะดะพะปะถะฝะณะพ ะฑััั 5 ะฟัะฝะบัะพะฒ
    - ะะฐะดะฐะฝะธั ะดะพะปะถะฝั ะฑััั ั ะฒะพะทัะพัะฐััะตะน ัะปะพะถะฝะพัััั
    - ะัะต ะฐัะฐะฑัะบะธะต ัะปะพะฒะฐ ั ะพะณะปะฐัะพะฒะบะฐะผะธ
    - ะัะฟะพะปัะทะพะฒะฐัั ัะผะพะดะทะธ (๐น ะดะปั ะทะฐะดะฐะฝะธะน, ๐ ะดะปั ะพัะฒะตัะพะฒ)
    - ะขะพะปัะบะพ ะพะดะฝะพะทะฝะฐัะฝัะต ะพัะฒะตัั
    - ะะตะท ะพัะบััััั ะฒะพะฟัะพัะพะฒ
    - ะะตะท markdown ัะพัะผะฐัะธัะพะฒะฐะฝะธั

    ะคะพัะผะฐั ะบะฐะถะดะพะณะพ ะทะฐะดะฐะฝะธั:
    ๐น ะะฐะดะฐะฝะธะต [ะฝะพะผะตั]. [ะกััั ะทะฐะดะฐะฝะธั]
    [ะกะพะดะตัะถะฐะฝะธะต]
    ๐ ะัะฒะตั:
    [ะัะฒะตั]

    ะัะธะผะตั ะทะฐะดะฐะฝะธั:
    ๐น ะะฐะดะฐะฝะธะต 1. ะกะพะตะดะธะฝะธัะต ัะปะพะฒะฐ ะฒ ะธะดะฐัั
    ุจูููุช + ุงูููููุฏู โ
    ....ะธ ัะด
    ๐ ะัะฒะตั:
    ุจูููุชู ุงูููููุฏู (ะดะพะผ ะผะฐะปััะธะบะฐ)
    ....ะธ ัะด
    "#.to_string();


    let promt = "๐ ะฃัะพะบ: ะูุถูุงูู ุฅููููููู (ะัะธััะถะฐัะตะปัะฝะฐั ะบะพะฝััััะบัะธั)

ะ ะฐัะฐะฑัะบะพะผ ัะทัะบะต, ััะพะฑั ัะบะฐะทะฐัั (ััะพ-ัะพ ัะตะณะพ-ัะพ) (ะฝะฐะฟัะธะผะตั, ะดะพะผ ัััะดะตะฝัะฐ, ะบะฝะธะณะฐ ััะธัะตะปั), ะธัะฟะพะปัะทัะตััั ะบะพะฝััััะบัะธั ูุถุงู + ูุถุงู ุฅููู.

๐น ููุถูุงู โ ะฟะตัะฒะพะต ัะปะพะฒะพ (ะพะฑัะตะบั, ะบะพัะพััะน ะฟัะธะฝะฐะดะปะตะถะธั).
๐น ููุถูุงู ุฅููููููู โ ะฒัะพัะพะต ัะปะพะฒะพ (ัะพั, ะบะพะผั ะฟัะธะฝะฐะดะปะตะถะธั). ะะฝะพ ะฒัะตะณะดะฐ ะฒ ัะพะดะธัะตะปัะฝะพะผ ะฟะฐะดะตะถะต (majrลซr).

๐ ะัะฐะฒะธะปะฐ:

    ะฃ ะผัะดะพัะฐ (ะฟะตัะฒะพะต ัะปะพะฒะพ) ะฝะตั ะฐััะธะบะปั ุงู ะธ ะฝะตั ัะฐะฝะฒะธะฝะฐ.

    ะัะดะพั ะธะปัะนั (ะฒัะพัะพะต ัะปะพะฒะพ) ัะฐััะพ ั ะฐััะธะบะปะตะผ ุงู ะธ ะพะฑัะทะฐัะตะปัะฝะพ ะฒ ัะพะดะธัะตะปัะฝะพะผ ะฟะฐะดะตะถะต.

    ะะตะถะดั ัะปะพะฒะฐะผะธ ะฝะตั ะฟัะตะดะปะพะณะพะฒ.

๐ ะัะธะผะตัั:

    ุจูุชู ุงูุทุงูุจู โ ะดะพะผ ัััะดะตะฝัะฐ

    ูุชุงุจู ุงูุฃุณุชุงุฐู โ ะบะฝะธะณะฐ ััะธัะตะปั

    ุณูุงุฑุฉู ุงููุฏูุฑู โ ะผะฐัะธะฝะฐ ะดะธัะตะบัะพัะฐ

๐ฏ ะะพะฟัะพะฑัะน ะฟะตัะตะฒะตััะธ:

    ะะปัั ะผะฐัะธะฝั

    ะขะตััะฐะดั ััะตะฝะธะบะฐ

    ะะผั ััะธัะตะปั

ะัะฒะตัั:

    ููุชุงุญู ุงูุณูุงุฑุฉู

    ุฏูุชุฑู ุงูุทุงูุจู

    ุงุณูู ุงูุฃุณุชุงุฐู

".to_string();



    println!("Running test...");
    let client = TestGptClient;
    let response = client
        .get_completion(&promt, &context)
        .await
        .expect("Failed to get AI completion");

    println!("Response from AI: {}", response);
}


// cargo run -- --test